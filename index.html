<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PDF Merger</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 20px;
        background: linear-gradient(135deg, #f6f9fc 0%, #edf2f7 100%);
        color: #1a202c;
        line-height: 1.6;
      }

      h1 {
        color: #2d3748;
        text-align: center;
        margin-bottom: 2rem;
        font-weight: 700;
        font-size: 2.25rem;
        letter-spacing: -0.025em;
      }

      .container {
        background-color: white;
        padding: 2.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(226, 232, 240, 0.8);
      }

      .file-inputs {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        margin-bottom: 2.5rem;
      }

      .file-input-wrapper {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      label {
        font-weight: 600;
        color: #2d3748;
        font-size: 0.95rem;
      }

      input[type="file"] {
        padding: 1.5rem;
        border: 2px dashed #e2e8f0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        background-color: #f8fafc;
      }

      input[type="file"]:hover {
        border-color: #4a5568;
        background-color: #f1f5f9;
      }

      button {
        display: block;
        width: 100%;
        padding: 1rem 1.5rem;
        background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      button:active {
        transform: translateY(0);
      }

      .instructions {
        text-align: center;
        margin-bottom: 2.5rem;
        color: #4a5568;
        font-size: 1.1rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>PDF Merger</h1>
      <p class="instructions">
        Select multiple PDF files, and click <strong>Merge</strong> to combine
        them.
      </p>

      <!-- File inputs -->
      <div class="file-inputs">
        <div class="file-input-wrapper">
          <label for="pdfs">Select PDFs</label>
          <input type="file" id="pdfs" accept="application/pdf" multiple />
        </div>
      </div>

      <!-- Merge button -->
      <button onclick="mergePDFs()">Merge PDFs</button>
    </div>

    <!-- pdf-lib script (from UNPKG CDN) -->
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

    <script>
      async function mergePDFs() {
        const fileInput = document.getElementById("pdfs");
        const files = Array.from(fileInput.files);

        if (files.length < 2) {
          alert("Please select at least two PDF files!");
          return;
        }

        try {
          // Read all files as ArrayBuffers
          const arrayBuffers = await Promise.all(
            files.map((file) => file.arrayBuffer())
          );

          // Load the first PDF as our base
          const mergedPdf = await PDFLib.PDFDocument.load(arrayBuffers[0]);

          // Load and copy pages from all other PDFs
          for (let i = 1; i < arrayBuffers.length; i++) {
            const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffers[i]);
            const copiedPages = await mergedPdf.copyPages(
              pdfDoc,
              pdfDoc.getPageIndices()
            );
            copiedPages.forEach((page) => {
              mergedPdf.addPage(page);
            });
          }

          // Convert merged PDF to a Uint8Array
          const mergedPdfBytes = await mergedPdf.save();

          // Create a Blob from the merged PDF bytes
          const blob = new Blob([mergedPdfBytes], { type: "application/pdf" });
          const url = URL.createObjectURL(blob);

          // Create a temporary link to trigger a browser download
          const link = document.createElement("a");
          link.href = url;
          link.download = "merged.pdf";
          document.body.appendChild(link);
          link.click();

          // Clean up
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
        } catch (err) {
          console.error("Error merging PDFs:", err);
          alert(
            "An error occurred while merging PDFs. See console for details."
          );
        }
      }
    </script>
  </body>
</html>
